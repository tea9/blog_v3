---
title: 安卓逆向手机初始化
tags:
  - android安全
categories:
  - - 安全
    - 移动安全
    - android安全
abbrlink: 4022100870
date: 2019-09-18 10:21:58
description: 安卓逆向手机初始化，nexus5
---

> 测试手机：nexus5 系统6.0.1 (M4B30Z, Dec 2016)

## 1.刷机

[官方rom下载](https://developers.google.cn/android/images#hammerhead)  

**解锁**

```
 电源键加音量-进入 bootloader


解锁
adb reboot bootloader
对于新款设备（2015 年及之后发布的设备）：
fastboot flashing unlock
对于老款设备（2014 年及之前发布的设备）：
fastboot oem unlock

重新锁定
fastboot flashing lock
老设备执行：
fastboot oem lock
```

**安装rom**

```
解压下载的rom
adb reboot bootloader
chmod +x flash-all.sh
./flash-all.sh
等待安装后重启
```

**error**
FAILED (remote: 'Bogus size sparse and chunk header')
fastboot: error: Command failed  

```
1) extract image-hammerhead-m4b30z.zip

2) cd to the extracted folder

3) run the following commands (one by one)
fastboot erase userdata
fastboot flash userdata userdata.img
fastboot erase cache
fastboot flash cache cache.img
fastboot reboot
```


## 2.TWRP（第三方recovery刷机工具）

[twrp-3.0.2-0-hammerhead.img](https://dl.twrp.me/hammerhead/twrp-3.0.2-0-hammerhead.img.html)  
[twrp pan](https://pan.baidu.com/s/1rWQ_tZulksadu_Hx8S1QNw)  

```
adb reboot bootloader
fastboot devices #判断设备是否连接
fastboot flash recovery twrp.img
要音量上下选择recovery mode 直接进入
```

nexus5进入recovery模式

```
1、拔掉数据线、关机
2、按住【音量减小键】不松手，再按【电源键】，会进入bootloader选择模式
3、此时音量键是上下移动光标的作用，电源键是确定的作用
4、按音量减小键，将选项切换到【Recovery mode】系统恢复模式，然后按电源键确定
5、稍等片刻，手机会出现一个到底机器人和感叹号，不用担心，这是android系统在提醒你，这个操作有风险。
6、按住电源键不松手，然后另一只手按一下【音量增大键】即可进入recovery模式
```

## 3.Root

[root工具包](https://download.chainfire.eu/363/CF-Root/CF-Auto-Root/CF-Auto-Root-hammerhead-hammerhead-nexus5.zip)  

[SuperSu](https://download.chainfire.eu/1016/SuperSU/UPDATE-SuperSU-v2.79-20161211114519.zip)  

```
adb push UPDATE-SuperSU-v2.79-20161211114519.zip /sdcard
adb reboot recovery
选择包install image
reboot system
```

## 4.Xposed

[xposed download](https://forum.xda-developers.com/showthread.php?t=3034811)  

根据设备CPU型号下载对应的框架和应用,比如如果是nexus5 android5.0.1，选择xposed-v86-sdk21-arm.zip和XposedInstaller_3.1.apk

```
adb push xposed-v86-sdk23-arm.zip /sdcard  
adb reboot recovery
选择包install image
reboot system

adb install XposedInstaller_3.1.5.apk #查看xposed是否激活  需要授予root权限
```

## 5.Xposed模块

[BuildProp Enhancer](http://repo.xposed.info/module/com.jecelyin.buildprop)用于修改apk的调试标志  
[justtrustme](https://pan.baidu.com/s/1BjdycxRGu2IU7nn8gQcYNQ)突破证书校验  
[justmeplush](https://pan.baidu.com/s/1wrBc1yhBLUs8s_ytn3H8UA)  


## 6.Drozer

> python2.7  

```

```

## 7.Frida

```
adb shell getprop ro.product.cpu.abi #查看手机cpu
```
[frida-server](https://github.com/frida/frida/releases)  

frida需要在root权限运行

```
adb push frida-server /data/local/tmp/
chmod 755 /data/local/tmp/frida-server
./frida-server
```
在新开个命令行

```
frida-ps -U
```
[[原创]Frida从入门到入门—安卓逆向菜鸟的frida食用说明](https://bbs.pediy.com/thread-226846.htm)  
[Frida 安装和使用](https://www.jianshu.com/p/bab4f4714d98)  
[翻译]在未root的设备上使用frida](https://bbs.pediy.com/thread-229970.htm)  

## 8.Busybox

[android busybox](https://tea9.xyz/post/1663513283.html)  
